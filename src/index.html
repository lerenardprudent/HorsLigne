<!DOCTYPE html>
<html>
<head>
  <title>Carte Hors-Ligne</title>
  <meta charset="utf-8" />
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
  
  <link rel="stylesheet" href="leaflet-plugins/leaflet.css" />
  <link rel="stylesheet" href="leaflet-plugins/locate/L.Control.Locate.css" />
  <link rel="stylesheet" href="leaflet-plugins/search/leaflet-search.css" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    
  <script src="jquery-1.10.2.min.js"></script>  
  <script src="leaflet-plugins/leaflet.js"></script>
  <script src="leaflet-plugins/locate/L.Control.locate.js"></script>
  <script src="leaflet-plugins/search/leaflet-search.js"></script>
	
	<link rel="stylesheet" href="Leaflet.draw.dist/leaflet.draw.css" />
	
	<script src="Leaflet.draw.src/Leaflet.draw.js"></script>

	<script src="Leaflet.draw.src/edit/handler/Edit.Poly.js"></script>
	<script src="Leaflet.draw.src/edit/handler/Edit.SimpleShape.js"></script>
	<script src="Leaflet.draw.src/edit/handler/Edit.Circle.js"></script>
	<script src="Leaflet.draw.src/edit/handler/Edit.Rectangle.js"></script>

	<script src="Leaflet.draw.src/draw/handler/Draw.Feature.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.Polyline.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.Polygon.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.SimpleShape.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.Rectangle.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.Circle.js"></script>
	<script src="Leaflet.draw.src/draw/handler/Draw.Marker.js"></script>

	<script src="Leaflet.draw.src/ext/LatLngUtil.js"></script>
	<script src="Leaflet.draw.src/ext/GeometryUtil.js"></script>
	<script src="Leaflet.draw.src/ext/LineUtil.Intersect.js"></script>
	<script src="Leaflet.draw.src/ext/Polyline.Intersect.js"></script>
	<script src="Leaflet.draw.src/ext/Polygon.Intersect.js"></script>

	<script src="Leaflet.draw.src/Control.Draw.js"></script>
	<script src="Leaflet.draw.src/Tooltip.js"></script>
	<script src="Leaflet.draw.src/Toolbar.js"></script>

	<script src="Leaflet.draw.src/draw/DrawToolbar.js"></script>
	<script src="Leaflet.draw.src/edit/EditToolbar.js"></script>
	<script src="Leaflet.draw.src/edit/handler/EditToolbar.Edit.js"></script>
	<script src="Leaflet.draw.src/edit/handler/EditToolbar.Delete.js"></script>

  <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="bootstrap/bootstrap-filestyle.min.js"> </script>
  <script type="text/javascript">
    $(document).ready( function() {
      var urlParams = parseUrl();
      if ( typeof(urlParams.lang) !== 'undefined' && urlParams.lang == LANGUE.Anglais.val ) {
        langue = LANGUE.Anglais;
      }
      else {
        langue = LANGUE.Français;
      }
      $('#' + langue.val).css('color', 'yellow').css('text-decoration', 'underline');
      
      document.getElementById("nomsess").value = getCurrTimestamp();
      
      document.getElementById("save").disabled = true;
      $(":file").filestyle({input: false,
                            classIcon: "glyphicon glyphicon-folder-open",
                            classButton: "btn btn-primary btn-sm myButtonStyle myFileStyle",
                            buttonText: "&nbsp;&nbsp;Charger"});
      $('.myFileStyle').attr('data-toggle', 'tooltip').attr('data-placement', 'right').attr('title', 'Charger une session antérieure');
      $('[data-toggle="tooltip"]').tooltip();
      var noZoneYetMsg = ' (aucune zone n\'a encore été dessinée)';
      $('.leaflet-draw-edit-edit').attr('title', tooltipEdit + noZoneYetMsg );
      $('.leaflet-draw-edit-remove').attr('title', tooltipDelete + noZoneYetMsg );
    });
  </script>
</head>
<body>
	<div id="header">
    <a href='http://www.douglas.qc.ca/?locale=fr'><img id="logo" src='logo-douglas.jpg' border=0 /></a>
    <span id="header-title">VERITAS Hors-Ligne</span>
    <span id='langues'>
      <a id='fr' href='#' title='Version française'>Français</a>&nbsp;/&nbsp;<a id='en' title='English version' href='http://localhost:6767/index.html?lang=en'>English</a>
    </span>
	</div>
    <div id="map"></div>
    <script src="map.js"></script>
    <div id="cpanel" class="hcenter">
      <p>
      <p>
      <label id="labelnomsess">Nom de séssion:</label>
      <input id="nomsess" class="myButtonStyle" data-placement="right" data-toggle="tooltip" title="Choisir un nom pour cette session"/>
      <p>
      <button type="button" onclick="recenter_map();" class="btn btn-primary btn-sm myButtonStyle" data-placement="right" data-toggle="tooltip" title="Voir l'étendue de la carte">
        <i class="glyphicon glyphicon-fullscreen"></i>&nbsp;&nbsp;&nbsp;Recentrer
      </button>
      <p>
      <input id="fileToLoad" type="file" onchange="loadSession();" data-placement="right" data-toggle="tooltip" title="Sauvegarder la session actuelle">
      <p>
      <div  data-placement="right" data-toggle="tooltip" title="Sauvegarder la session actuelle">
        <button id="save" class="btn btn-primary btn-sm myButtonStyle" onclick="saveTextAsFile()">
          <i class="glyphicon glyphicon-save"></i>&nbsp;&nbsp;Sauvegarder
        </button>
      </div>
      <p>
      <button id="about" class="btn btn-primary myButtonStyle" data-placement="right" data-toggle="modal" data-target="#myModal" title="Afficher un résumé de ce projet">
        <i class="glyphicon glyphicon-info-sign"></i>&nbsp;&nbsp;À propos
      </button>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="myModalLabel">VERITAS Hors-Ligne v0,2</h4>
          </div>
          <div class="modal-body">
            <p>Un outil de cartographie du quartier perçu pour les résidents du Sud-Ouest de Montréal.</p>
            <p>Développé par <a href='http://www.treksoft.com/'>Treksoft</a> 2014 pour l'<a href='http://www.douglas.qc.ca/?locale=fr'>Institut universitaire en santé mentale Douglas</a>.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</body>
</html>